<head>
  <title>Labor Tracker</title>
  <link href='http://fonts.googleapis.com/css?family=Lustria' rel='stylesheet' type='text/css'>
</head>

<body>
  {{> main}}
</body>

<template name="needsession">
<h1>Labor Tracker</h1>
<div class="needsession">Enter a unique name (no spaces) for your data. You can share it with a group of friends or your guild or whatever, but anyone who has the name can add/delete/modify the data.</div>
<input id="sessionname" class="needsession" type="text" value=""><input class="sessionnamesubmit" type="button" value="Go!">
  
</template>

<template name="help">
  <div class="help">Page automatically updates while it is open. Most of the fields can be updated by clicking on them.</div>
</template>

<template name="main">
  {{#if need_session}}
    {{> needsession}}
  {{else}}
    <h1>Labor Tracker</h1>
    {{> help}}
    
    <table class="characters"  cellpadding="0" cellspacing="0">
      <tr>
        <th class="actions"></th>
        <th class="name">Name</th>
        <th class="labormax">Max</th>
        <th class="labor">Labor</th>
        <th class="maxtime">Cap Time</th>
      </tr>
      {{#each characters}}
        {{> character}}
      {{/each}}
    </table>
    
    <input class="addcharacter clearfix" type="button" value="Add Character" />
    <a href="/">Go here to create your own list</a>
  {{/if}}
</template>

<template name="character">
  <tr>
    <td class="actions">
      <a class="remove" href="javascript:return false">Remove</a>
    </td>
    <td class="name">
      {{#if editingname}}
        <div class="editname">
          <input class="inline character-name-input" id="character-name-input" type="text" value="{{name}}" />
        </div>
      {{else}}
        <div class="name">{{name}}</div>
      {{/if}}
    </td>
    
    <td class="labormax">
      {{#if editinglabormax}}
        <div class="editlabormax">
          <input class="inline character-labormax-input" id="character-labormax-input" type="text" value="{{labormax}}" />
        </div>
      {{else}}
        <div class="labormax">{{labormax}}</div>
      {{/if}}
    </td>
    
    <td class="labor">
      <div class="maxcontainer" style="width: {{percentagemax}}%;">
        <div class="innercontainer" style="width: {{percentage}}%">
          &nbsp;
        </div>
        &nbsp;
      </div>
      <div class="laborcontent">
        {{#if editinglabor}}
          <div class="editlabor">
            <input class="inline character-labor-input" id="character-labor-input" type="text" value="{{currentlabor}}" />
          </div>
        {{else}}
          <div class="labor">
            <span class="currentlabor">{{currentlaborcapped}}</span>
            {{#if laborcapped}}
              <span class="laborwaste">({{laborwaste}} wasted!)</span>
            {{/if}}
          </div>
        {{/if}}
      </div>
    </td>
    
    <td class="maxtime">
      {{maxtime}}
    </td>
  </tr>
</template>
